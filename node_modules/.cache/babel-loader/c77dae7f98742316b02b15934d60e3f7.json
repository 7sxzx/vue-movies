{"remainingRequest":"/Users/David/_Proyectos/_GIT/vue-movies/node_modules/babel-loader/lib/index.js!/Users/David/_Proyectos/_GIT/vue-movies/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/David/_Proyectos/_GIT/vue-movies/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/David/_Proyectos/_GIT/vue-movies/src/views/ShowsView.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/David/_Proyectos/_GIT/vue-movies/src/views/ShowsView.vue","mtime":1570794178000},{"path":"/Users/David/_Proyectos/_GIT/vue-movies/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/David/_Proyectos/_GIT/vue-movies/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/David/_Proyectos/_GIT/vue-movies/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/David/_Proyectos/_GIT/vue-movies/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.search\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/David/_Proyectos/_GIT/vue-movies/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport AppSearch from \"@/components/AppSearch\";\nimport ItemList from \"@/components/ItemList\";\nimport AppServices from \"@/services/AppServices\";\nimport { viewDetailMixin } from \"@/mixins/viewDetailMixin\";\nexport default {\n  name: \"ShowsView\",\n  mixins: [viewDetailMixin],\n  components: {\n    AppSearch: AppSearch,\n    ItemList: ItemList\n  },\n  props: {\n    type: {\n      default: \"movie\"\n    }\n  },\n  data: function data() {\n    return {\n      query: \"\",\n      page: 1,\n      searching: false,\n      loading: false,\n      error: \"\",\n      results: [],\n      totalResults: null,\n      totalPages: null\n    };\n  },\n  computed: {\n    loadMore: function loadMore() {\n      return this.totalPages > this.page ? true : false;\n    },\n    showResults: function showResults() {\n      return !this.searching && this.totalResults != null;\n    },\n    showMessage: function showMessage() {\n      return this.searching || this.error != \"\" ? true : false;\n    },\n    message: function message() {\n      return this.searching ? \"Searching...\" : this.error;\n    }\n  },\n  methods: {\n    handleSearch: function handleSearch(query) {\n      this.query = query;\n      this.viewResults(\"SEARCH\");\n    },\n    viewResults: function () {\n      var _viewResults = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(action) {\n        var response;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (action == \"SEARCH\") {\n                  this.page = 1;\n                  this.searching = true;\n                  this.results = [];\n                } else {\n                  this.page++;\n                  this.loading = true;\n                }\n\n                _context.prev = 1;\n                _context.next = 4;\n                return AppServices.search(this.query, this.page, this.type);\n\n              case 4:\n                response = _context.sent;\n                this.results = this.results.concat(response.data.results);\n                this.totalResults = response.data.total_results;\n                this.totalPages = response.data.total_pages;\n                _context.next = 14;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](1);\n                if (action == \"MORE\") this.page--;\n                this.error = _context.t0;\n\n              case 14:\n                _context.prev = 14;\n                this.searching = false;\n                this.loading = false;\n                return _context.finish(14);\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 10, 14, 18]]);\n      }));\n\n      function viewResults(_x) {\n        return _viewResults.apply(this, arguments);\n      }\n\n      return viewResults;\n    }()\n  }\n};",{"version":3,"sources":["ShowsView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,OAAA,SAAA,MAAA,wBAAA;AACA,OAAA,QAAA,MAAA,uBAAA;AACA,OAAA,WAAA,MAAA,wBAAA;AACA,SAAA,eAAA,QAAA,0BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,MAAA,EAAA,CAAA,eAAA,CAFA;AAGA,EAAA,UAAA,EAAA;AACA,IAAA,SAAA,EAAA,SADA;AAEA,IAAA,QAAA,EAAA;AAFA,GAHA;AAOA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,OAAA,EAAA;AADA;AADA,GAPA;AAYA,EAAA,IAZA,kBAYA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA,CAFA;AAGA,MAAA,SAAA,EAAA,KAHA;AAIA,MAAA,OAAA,EAAA,KAJA;AAKA,MAAA,KAAA,EAAA,EALA;AAMA,MAAA,OAAA,EAAA,EANA;AAOA,MAAA,YAAA,EAAA,IAPA;AAQA,MAAA,UAAA,EAAA;AARA,KAAA;AAUA,GAvBA;AAwBA,EAAA,QAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,aAAA,KAAA,UAAA,GAAA,KAAA,IAAA,GAAA,IAAA,GAAA,KAAA;AACA,KAHA;AAIA,IAAA,WAJA,yBAIA;AACA,aAAA,CAAA,KAAA,SAAA,IAAA,KAAA,YAAA,IAAA,IAAA;AACA,KANA;AAOA,IAAA,WAPA,yBAOA;AACA,aAAA,KAAA,SAAA,IAAA,KAAA,KAAA,IAAA,EAAA,GAAA,IAAA,GAAA,KAAA;AACA,KATA;AAUA,IAAA,OAVA,qBAUA;AACA,aAAA,KAAA,SAAA,GAAA,cAAA,GAAA,KAAA,KAAA;AACA;AAZA,GAxBA;AAsCA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,KADA,EACA;AACA,WAAA,KAAA,GAAA,KAAA;AACA,WAAA,WAAA,CAAA,QAAA;AACA,KAJA;AAKA,IAAA,WALA;AAAA;AAAA;AAAA,+CAKA,MALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA,oBAAA,MAAA,IAAA,QAAA,EAAA;AACA,uBAAA,IAAA,GAAA,CAAA;AACA,uBAAA,SAAA,GAAA,IAAA;AACA,uBAAA,OAAA,GAAA,EAAA;AACA,iBAJA,MAIA;AACA,uBAAA,IAAA;AACA,uBAAA,OAAA,GAAA,IAAA;AACA;;AAbA;AAAA;AAAA,uBAgBA,WAAA,CAAA,MAAA,CACA,KAAA,KADA,EAEA,KAAA,IAFA,EAGA,KAAA,IAHA,CAhBA;;AAAA;AAgBA,gBAAA,QAhBA;AAqBA,qBAAA,OAAA,GAAA,KAAA,OAAA,CAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA,OAAA,CAAA;AACA,qBAAA,YAAA,GAAA,QAAA,CAAA,IAAA,CAAA,aAAA;AACA,qBAAA,UAAA,GAAA,QAAA,CAAA,IAAA,CAAA,WAAA;AAvBA;AAAA;;AAAA;AAAA;AAAA;AAyBA,oBAAA,MAAA,IAAA,MAAA,EAAA,KAAA,IAAA;AACA,qBAAA,KAAA;;AA1BA;AAAA;AA4BA,qBAAA,SAAA,GAAA,KAAA;AACA,qBAAA,OAAA,GAAA,KAAA;AA7BA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAtCA,CAAA","sourcesContent":["<template>\n  <div>\n    <AppSearch :type=\"type\" @new-search=\"handleSearch\" />\n\n    <div class=\"message\">\n      <div v-show=\"showMessage\">{{ message }}</div>\n      <div v-show=\"showResults\">\n        Results found for\n        <span class=\"query\">{{ query }}</span>\n        : {{ totalResults }}\n      </div>\n    </div>\n\n    <ItemList :results=\"results\" :type=\"type\" @item-clicked=\"viewDetailInfo\" />\n\n    <div v-show=\"loadMore\" class=\"more-container\">\n      <a href=\"#\" @click.prevent=\"viewResults('MORE')\">\n        <span v-if=\"loading\">Loading...</span>\n        <span v-else>Load more results</span>\n      </a>\n    </div>\n  </div>\n</template>\n\n<script>\nimport AppSearch from \"@/components/AppSearch\";\nimport ItemList from \"@/components/ItemList\";\nimport AppServices from \"@/services/AppServices\";\nimport { viewDetailMixin } from \"@/mixins/viewDetailMixin\";\n\nexport default {\n  name: \"ShowsView\",\n  mixins: [viewDetailMixin],\n  components: {\n    AppSearch,\n    ItemList\n  },\n  props: {\n    type: {\n      default: \"movie\"\n    }\n  },\n  data() {\n    return {\n      query: \"\",\n      page: 1,\n      searching: false,\n      loading: false,\n      error: \"\",\n      results: [],\n      totalResults: null,\n      totalPages: null\n    };\n  },\n  computed: {\n    loadMore() {\n      return this.totalPages > this.page ? true : false;\n    },\n    showResults() {\n      return !this.searching && this.totalResults != null;\n    },\n    showMessage() {\n      return this.searching || this.error != \"\" ? true : false;\n    },\n    message() {\n      return this.searching ? \"Searching...\" : this.error;\n    }\n  },\n  methods: {\n    handleSearch(query) {\n      this.query = query;\n      this.viewResults(\"SEARCH\");\n    },\n    async viewResults(action) {\n      if (action == \"SEARCH\") {\n        this.page = 1;\n        this.searching = true;\n        this.results = [];\n      } else {\n        this.page++;\n        this.loading = true;\n      }\n\n      try {\n        const response = await AppServices.search(\n          this.query,\n          this.page,\n          this.type\n        );\n        this.results = this.results.concat(response.data.results);\n        this.totalResults = response.data.total_results;\n        this.totalPages = response.data.total_pages;\n      } catch (e) {\n        if (action == \"MORE\") this.page--;\n        this.error = e;\n      } finally {\n        this.searching = false;\n        this.loading = false;\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.query {\n  color: $color-primary;\n  font-weight: bold;\n  font-style: italic;\n  text-transform: lowercase;\n}\n</style>"],"sourceRoot":"src/views"}]}